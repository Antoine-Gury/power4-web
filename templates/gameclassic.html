<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Puissance 4 - Classic</title>
<style>
body { font-family: Arial; text-align: center; background-color: #8FA1FA; margin: 0; padding: 20px; }
h1 { color: #333; margin-bottom: 20px; }
.info { font-size: 20px; margin: 20px 0; font-weight: bold; }
.player1 { color: #e74c3c; }
.player2 { color: #f3d512; }

.board { display: inline-block; background-color: #3498db; padding: 20px; border-radius: 10px; }
.row { display: flex; justify-content: center; }
.cell { width: 80px; height: 80px; margin: 5px; border-radius: 50%; background-color: white; display: flex; align-items: center; justify-content: center; border: none; cursor: pointer; }
.cell.player1 { background-color: #e74c3c; }
.cell.player2 { background-color: #f3d512; }

.winner { font-size: 28px; font-weight: bold; margin: 20px 0; padding: 15px; background-color: #2ecc71; color: white; border-radius: 10px; display: inline-block; }
.draw { font-size: 28px; font-weight: bold; margin: 20px 0; padding: 15px; background-color: #95a5a6; color: white; border-radius: 10px; display: inline-block; }

.bottom-buttons { margin-top: 20px; }
.reset-btn { background-color: #e67e22; padding: 10px 20px; border: none; border-radius: 5px; color: white; cursor: pointer; }
.menu-btn { background-color: #9b59b6; padding: 10px 20px; border: none; border-radius: 5px; color: white; cursor: pointer; margin-left: 10px; }
.reset-btn:hover { background-color: #d35400; }
.menu-btn:hover { background-color: #8e44ad; }

</style>
</head>
<body>
<h1>🎮 Puissance 4 - Classic 🎮</h1>

<!-- AJOUT : Vérification de fin de partie -->
{{if .GameOver}}
    {{if eq .Winner -1}}
        <div class="draw">Match nul ! 🤝</div>
    {{else if eq .Winner 1}}
        <div class="winner">Le joueur 1 (Rouge) a gagné ! 🎉</div>
    {{else if eq .Winner 2}}
        <div class="winner">Le joueur 2 (Jaune) a gagné ! 🎉</div>
    {{end}}
{{else}}
    <!-- Si la partie n'est pas finie, affiche le joueur actuel -->
    <div class="info">
    Joueur actuel : <span class="{{if eq .CurrentPlayer 1}}player1{{else}}player2{{end}}">
    {{if eq .CurrentPlayer 1}}Joueur 1 (Rouge){{else}}Joueur 2 (Jaune){{end}}
    </span>
    </div>
{{end}}

<!-- Plateau -->
<div class="board">
{{range $r, $row := .Board}}
  <div class="row">
    {{range $c, $cell := $row}}
      <form method="POST" action="/play" style="display:inline;">
        <input type="hidden" name="column" value="{{$c}}">
        <button type="submit" class="cell {{if eq $cell 1}}player1{{else if eq $cell 2}}player2{{end}}">
        </button>
      </form>
    {{end}}
  </div>
{{end}}
</div>

<!-- Boutons du bas -->
<div class="bottom-buttons">
  <form method="POST" action="/reset" style="display:inline;">
    <button type="submit" class="reset-btn">🔄 Nouvelle Partie</button>
  </form>
  <form action="/menu" style="display:inline;">
    <button type="submit" class="menu-btn">🏠 Retour au menu principal</button>
  </form>
</div>

</body>
</html>